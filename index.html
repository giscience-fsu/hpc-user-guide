<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 1 Introduction | HPC User Guide</title>
<meta name="author" content="Patrick Schratz, Jannes Muenchow">
<meta name="generator" content="bookdown 0.23.1 with bs4_book()">
<meta property="og:title" content="Chapter 1 Introduction | HPC User Guide">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 1 Introduction | HPC User Guide">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><meta name="description" content="A book created with bookdown.">
<meta property="og:description" content="A book created with bookdown.">
<meta name="twitter:description" content="A book created with bookdown.">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">HPC User Guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="active" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="rstudio-workbench.html"><span class="header-section-number">2</span> RStudio Workbench</a></li>
<li><a class="" href="shiny-server.html"><span class="header-section-number">3</span> Shiny Server</a></li>
<li><a class="" href="slurm-hpc-scheduler.html"><span class="header-section-number">4</span> SLURM: HPC scheduler</a></li>
<li><a class="" href="libraries.html"><span class="header-section-number">5</span> Libraries and Environment Modules</a></li>
<li><a class="" href="miscellaneous-helpers.html"><span class="header-section-number">6</span> Miscellaneous Helpers</a></li>
<li><a class="" href="troubleshooting-and-cautionary-notes.html"><span class="header-section-number">7</span> Troubleshooting and Cautionary Notes</a></li>
<li><a class="" href="admin-tasks.html"><span class="header-section-number">8</span> Admin Tasks</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><!--bookdown:title:end--><!--bookdown:title:start--><div id="intro" class="section level1">
<h1>
<span class="header-section-number">1</span> Introduction<a class="anchor" aria-label="anchor" href="#intro"><i class="fas fa-link"></i></a>
</h1>
<p>Welcome to the user manual of the High-Performance-Cluster (HPC) of the GIScience group (University of Jena).</p>
<p>It is tailored towards R processing but can also be used with any other programming language.</p>
<p><strong>A short introduction to HPCs</strong></p>
<p>The big advantage of a HPC is that users can submit jobs to ONE machine which then distributes the work across multiple machines in the background.
Incoming processing requests (jobs) are handled by the scheduler (SLURM), taking away the work of queuing the job and the potential issue of clashing into jobs from other users.</p>
<p>Administration is simplified by provisioning all computing nodes with the same virtual image.
This way, maintenance tasks are reduced and differences between the machines are avoided.
Library management across nodes is is done via the <a href="https://spack.io">Spack</a> package manager as this application allows for version-agnostic environment module installations.</p>
<p>The <code>$HOME</code> directory of every user is shared across all nodes, avoiding the need to keep data and scripts in sync across multiple machines.</p>
<p><strong>Before you start</strong>:</p>
<ul>
<li><p>Working on a Linux server naturally requires a certain amount of familiarity with UNIX command-line shells and text editors.
There are dozens of Linux online tutorials which should help to get you started.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;For example, &lt;a href="https://ryanstutorials.net/linuxtutorial/" class="uri"&gt;https://ryanstutorials.net/linuxtutorial/&lt;/a&gt;.&lt;/p&gt;'><sup>1</sup></a>
Of course, there are also great books on how to use Linux such as <span class="citation">Shotts (<a href="admin-tasks.html#ref-shotts_linux_2012" role="doc-biblioref">2012</a>)</span>, <span class="citation">Sobell (<a href="admin-tasks.html#ref-sobell_practical_2010" role="doc-biblioref">2010</a>)</span> and <span class="citation">Ward (<a href="admin-tasks.html#ref-ward_how_2015" role="doc-biblioref">2015</a>)</span> all of which are freely available.
If you still get stuck, Google will certainly help you.</p></li>
<li><p>Please add a SSH key pair to your account to be able to log in to the server without having to type your password every time.
This is especially useful since your password will consist of many letters and numbers (&gt; 10) which you do not want to memorize.
See <a href="https://help.github.com/articles/connecting-to-github-with-ssh/">this</a> guide if you have never worked with SSH keys before.
If you already use a SSH key pair on your machine, you can use <code>ssh-copy-id &lt;username&gt;@10.232.16.28</code> to copy your key to the server.
Afterwards you should be able to login via <code>ssh &lt;username&gt;@10.232.16.28</code> without being prompted for your password.</p></li>
</ul>
<div id="web-address" class="section level2">
<h2>
<span class="header-section-number">1.1</span> Web Address<a class="anchor" aria-label="anchor" href="#web-address"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://edi.geogr.uni-jena.de" class="uri">https://edi.geogr.uni-jena.de</a></p>
<p>IP: 10.232.16.28</p>
</div>
<div id="hardware" class="section level2">
<h2>
<span class="header-section-number">1.2</span> Hardware<a class="anchor" aria-label="anchor" href="#hardware"><i class="fas fa-link"></i></a>
</h2>
<p>The cluster consists of the following machines:</p>
<p>Group “<strong>threadripper</strong>”:</p>
<ul>
<li>CPU: AMD Threadripper 2950X, 16-core, Hyperthreading support, 3.5 GHz - 4.4 GHz</li>
<li>RAM: 126 GB DDR4</li>
<li>Number of nodes: 4 c[0-2] (+ frontend)</li>
<li>The “frontend” is only operating on 12 cores with 100 GB RAM</li>
</ul>
<p>Group “<strong>opteron</strong>”:</p>
<ul>
<li>CPU: AMD Opteron 6172, 48 cores, no Hyperthreading, 2.1 GHz</li>
<li>RAM: 252 GB DDR3 (c5 only comes with 130 GB RAM)</li>
<li>Number of nodes:
<ul>
<li>2 (c[3-4])</li>
<li>1 (c5)</li>
</ul>
</li>
</ul>
<p>The groups are reflected in the scheduler via the “partition” setting.</p>
<p>Group “threadripper” is about 3.5x faster than group “opteron”.</p>
</div>
<div id="software" class="section level2">
<h2>
<span class="header-section-number">1.3</span> Software<a class="anchor" aria-label="anchor" href="#software"><i class="fas fa-link"></i></a>
</h2>
<p>The HPC was built following the installation guide provided by the <a href="https://openhpc.community/">Open HPC</a> community (using the “Warewulf + Slurm” edition) and operates on a CentOS 7 base.
The scheduler that is used for queuing processing job requests is <a href="https://slurm.schedmd.com/">SLURM</a>.
Load monitoring is performed via <a href="http://ganglia.sourceforge.net/">Ganglia</a>.
A live view is accessible <a href="http://edi.geogr.uni-jena.de/ganglia/?r=hour&amp;cs=&amp;ce=&amp;m=load_one&amp;s=by+name&amp;c=&amp;tab=m&amp;vn=&amp;hide-hf=false">here</a>.
<a href="https://spack.io/">Spack</a> is used as the package manager.
More detailed instructions on the scheduler and the package manager can be found in their respective chapters.</p>
</div>
<div id="data-storage" class="section level2">
<h2>
<span class="header-section-number">1.4</span> Data storage<a class="anchor" aria-label="anchor" href="#data-storage"><i class="fas fa-link"></i></a>
</h2>
<p>The <em>mars</em> data server is mounted at <code>/home</code> and stores all the data.
Currently we have a capacity of 20 TB for all users combined.
Data can be stored directly under your <code>/home</code> directory.</p>
</div>
<div id="accessing-files-from-your-local-computer" class="section level2">
<h2>
<span class="header-section-number">1.5</span> Accessing files from your local computer<a class="anchor" aria-label="anchor" href="#accessing-files-from-your-local-computer"><i class="fas fa-link"></i></a>
</h2>
<p>It is recommended to mount the server via <code>sshfs</code> to your local machine.
Transfer speed ranges between 50 - 100 Mbit/s when you’re in the office so you should be able to access files without a delay.
Accessing files from outside will be slower.</p>
<p>If you really run in trouble with transfer speed, you could directly connect to the <em>mars</em> server.</p>
<p>Otherwise, the route is as follows: <code>&lt;local&gt; (sshfs) -&gt; edi (nfs) -&gt; mars</code></p>
<div id="unix" class="section level3">
<h3>
<span class="header-section-number">1.5.1</span> Unix<a class="anchor" aria-label="anchor" href="#unix"><i class="fas fa-link"></i></a>
</h3>
<p>For Unix system, the following command can be used</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="index.html#cb1-1"></a><span class="fu">sudo</span> sshfs -o reconnect,idmap=user,transform_symlinks,identityFile=~/.ssh/id_rsa,allow_other,cache=yes,kernel_cache,compression=no,default_permissions,uid=1000,gid=100,umask=0 <span class="op">&lt;</span>username<span class="op">&gt;</span>@10.232.16.28:/ <span class="op">&lt;</span>local-directory<span class="op">&gt;</span></span></code></pre></div>
<p>The mount process is passwordless if you do it via SSH (i.e. via your <code>~/.ssh/id_rsa</code> key).
Note that the mount is actually performed by the root user, so you need to copy your SSH key to the root user: <code>cp ~/.ssh/id_rsa /root/.ssh/id_rsa</code>.</p>
<p>For convenience you can create an executable script that performs this action every time you need it.</p>
<div class="rmdcaution">
<p>
Auto-mount during boot via <code>fstab</code> is not recommended since sometimes the network is not yet up when the mount is executed. This applies especially if you are not in the office but accessing the server from outside.
</p>
</div>
</div>
<div id="windows" class="section level3">
<h3>
<span class="header-section-number">1.5.2</span> Windows<a class="anchor" aria-label="anchor" href="#windows"><i class="fas fa-link"></i></a>
</h3>
<p>Please install <a href="https://github.com/billziss-gh/sshfs-win">sshfs-win</a> and follow the instructions.</p>
</div>
</div>
<div id="accessing-the-hpc-remotely-vpn" class="section level2">
<h2>
<span class="header-section-number">1.6</span> Accessing the HPC remotely (VPN)<a class="anchor" aria-label="anchor" href="#accessing-the-hpc-remotely-vpn"><i class="fas fa-link"></i></a>
</h2>
<p>A VPN connection is required to access the HPC remotely.
FSU uses the Cisco Anyconnect protocol for VPN purposes and recommends to use the <a href="https://www.uni-jena.de/VPN_Windows_Apple_Mobile">“Cisco Anyconnect Client”</a>.</p>
<p>This is a GUI which requires manual connect/disconnect actions.
In addition, the Cisco Anyconnect client is known to be slow and laggy (sorry no references here, just personal experience).
The open-source alternative <a href="https://gitlab.com/openconnect/openconnect">openconnect</a> does a much better job - and comes with a powerful CLI implementation.
If a GUI is preferred, have a look <a href="https://openconnect.github.io/openconnect-gui/">here</a> (looks like in Windows there is no way around the GUI?).</p>
<p><strong>Installation</strong></p>
<ul>
<li>macOS: <code>brew install openconnect</code>
</li>
<li>Windows: <code>choco install openconnect-gui</code> or downloading the <a href="https://openconnect.github.io/openconnect-gui/">GUI</a> directly</li>
</ul>
<p><strong>Usage</strong></p>
<p>On a UNIX-based system:</p>
<p>Start: <code>echo &lt;PASSWORD&gt; | sudo openconnect --user=&lt;USER&gt;@uni-jena.de --passwd-on-stdin --background vpn.uni-jena.de</code>
Stop: <code>sudo killall -SIGINT openconnect</code></p>
<p>On Windows: Sorry, not using Windows - feel free to add this info here.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="empty"></div>
<div class="next"><a href="rstudio-workbench.html"><span class="header-section-number">2</span> RStudio Workbench</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="nav-link" href="#web-address"><span class="header-section-number">1.1</span> Web Address</a></li>
<li><a class="nav-link" href="#hardware"><span class="header-section-number">1.2</span> Hardware</a></li>
<li><a class="nav-link" href="#software"><span class="header-section-number">1.3</span> Software</a></li>
<li><a class="nav-link" href="#data-storage"><span class="header-section-number">1.4</span> Data storage</a></li>
<li>
<a class="nav-link" href="#accessing-files-from-your-local-computer"><span class="header-section-number">1.5</span> Accessing files from your local computer</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#unix"><span class="header-section-number">1.5.1</span> Unix</a></li>
<li><a class="nav-link" href="#windows"><span class="header-section-number">1.5.2</span> Windows</a></li>
</ul>
</li>
<li><a class="nav-link" href="#accessing-the-hpc-remotely-vpn"><span class="header-section-number">1.6</span> Accessing the HPC remotely (VPN)</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>HPC User Guide</strong>" was written by Patrick Schratz, Jannes Muenchow. It was last built on 2021-08-20.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
