<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Libraries and Environment Modules | HPC User Guide</title>
  <meta name="description" content="Chapter 2 Libraries and Environment Modules | HPC User Guide" />
  <meta name="generator" content="bookdown 0.16.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Libraries and Environment Modules | HPC User Guide" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Libraries and Environment Modules | HPC User Guide" />
  
  
  

<meta name="author" content="Patrick Schratz, Jannes Muenchow" />


<meta name="date" content="2019-12-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="scheduler.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#web-address"><i class="fa fa-check"></i><b>1.1</b> Web Address</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#hardware"><i class="fa fa-check"></i><b>1.2</b> Hardware</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#software"><i class="fa fa-check"></i><b>1.3</b> Software</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#data-storage"><i class="fa fa-check"></i><b>1.4</b> Data storage</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#accessing-files-from-your-local-computer"><i class="fa fa-check"></i><b>1.5</b> Accessing files from your local computer</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#unix"><i class="fa fa-check"></i><b>1.5.1</b> Unix</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#windows"><i class="fa fa-check"></i><b>1.5.2</b> Windows</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#sharing-of-results"><i class="fa fa-check"></i><b>1.6</b> Sharing of Results</a><ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#workflowr"><i class="fa fa-check"></i><b>1.6.1</b> <code>workflowr</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#local-web-server"><i class="fa fa-check"></i><b>1.6.2</b> Local web server</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="libraries.html"><a href="libraries.html"><i class="fa fa-check"></i><b>2</b> Libraries and Environment Modules</a><ul>
<li class="chapter" data-level="2.1" data-path="libraries.html"><a href="libraries.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="libraries.html"><a href="libraries.html#loading-modules"><i class="fa fa-check"></i><b>2.2</b> Loading modules</a></li>
<li class="chapter" data-level="2.3" data-path="libraries.html"><a href="libraries.html#checking-loaded-modules"><i class="fa fa-check"></i><b>2.3</b> Checking loaded modules</a></li>
<li class="chapter" data-level="2.4" data-path="libraries.html"><a href="libraries.html#default-modules"><i class="fa fa-check"></i><b>2.4</b> Default modules</a></li>
<li class="chapter" data-level="2.5" data-path="libraries.html"><a href="libraries.html#r"><i class="fa fa-check"></i><b>2.5</b> R</a></li>
<li class="chapter" data-level="2.6" data-path="libraries.html"><a href="libraries.html#rstudio-server"><i class="fa fa-check"></i><b>2.6</b> RStudio Server</a></li>
<li class="chapter" data-level="2.7" data-path="libraries.html"><a href="libraries.html#shiny-server"><i class="fa fa-check"></i><b>2.7</b> Shiny Server</a></li>
<li class="chapter" data-level="2.8" data-path="libraries.html"><a href="libraries.html#libraries-1"><i class="fa fa-check"></i><b>2.8</b> Libraries</a><ul>
<li class="chapter" data-level="2.8.1" data-path="libraries.html"><a href="libraries.html#docker"><i class="fa fa-check"></i><b>2.8.1</b> Docker</a></li>
<li class="chapter" data-level="2.8.2" data-path="libraries.html"><a href="libraries.html#osrm"><i class="fa fa-check"></i><b>2.8.2</b> OSRM</a></li>
<li class="chapter" data-level="2.8.3" data-path="libraries.html"><a href="libraries.html#gdal"><i class="fa fa-check"></i><b>2.8.3</b> GDAL</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="libraries.html"><a href="libraries.html#getting-started"><i class="fa fa-check"></i><b>2.9</b> Getting Started</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="scheduler.html"><a href="scheduler.html"><i class="fa fa-check"></i><b>3</b> Scheduler</a><ul>
<li class="chapter" data-level="3.1" data-path="scheduler.html"><a href="scheduler.html#first-steps"><i class="fa fa-check"></i><b>3.1</b> First steps</a></li>
<li class="chapter" data-level="3.2" data-path="scheduler.html"><a href="scheduler.html#slurm-commands"><i class="fa fa-check"></i><b>3.2</b> SLURM commands</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="submit-jobs.html"><a href="submit-jobs.html"><i class="fa fa-check"></i><b>4</b> Submitting jobs</a><ul>
<li class="chapter" data-level="4.1" data-path="submit-jobs.html"><a href="submit-jobs.html#clustermq-setup"><i class="fa fa-check"></i><b>4.1</b> <code>clustermq</code> setup</a></li>
<li class="chapter" data-level="4.2" data-path="submit-jobs.html"><a href="submit-jobs.html#the-scheduler-template"><i class="fa fa-check"></i><b>4.2</b> The scheduler template</a></li>
<li class="chapter" data-level="4.3" data-path="submit-jobs.html"><a href="submit-jobs.html#allocating-resources"><i class="fa fa-check"></i><b>4.3</b> Allocating resources</a></li>
<li class="chapter" data-level="4.4" data-path="submit-jobs.html"><a href="submit-jobs.html#monitoring-progress"><i class="fa fa-check"></i><b>4.4</b> Monitoring progress</a></li>
<li class="chapter" data-level="4.5" data-path="submit-jobs.html"><a href="submit-jobs.html#summary"><i class="fa fa-check"></i><b>4.5</b> Summary</a></li>
<li class="chapter" data-level="4.6" data-path="submit-jobs.html"><a href="submit-jobs.html#best-practice"><i class="fa fa-check"></i><b>4.6</b> Best practice</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="troubleshooting-and-cautionary-notes.html"><a href="troubleshooting-and-cautionary-notes.html"><i class="fa fa-check"></i><b>5</b> Troubleshooting and Cautionary Notes</a><ul>
<li class="chapter" data-level="5.1" data-path="troubleshooting-and-cautionary-notes.html"><a href="troubleshooting-and-cautionary-notes.html#cautionary-notes"><i class="fa fa-check"></i><b>5.1</b> Cautionary Notes</a></li>
<li class="chapter" data-level="5.2" data-path="troubleshooting-and-cautionary-notes.html"><a href="troubleshooting-and-cautionary-notes.html#faq"><i class="fa fa-check"></i><b>5.2</b> FAQ</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HPC User Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="libraries" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Libraries and Environment Modules</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">2.1</span> Introduction</h2>
<p>Most system relevant libraries are installed via <a href="spack.io">Spack</a>.
However, as a user you do not need to worry about this since you are loading everything via “environment modules”.
Available modules can be queried using <code>modules avail</code>.</p>
<p>For setup reasons, please put the following at the top of your <code>~/.bashrc</code> file</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="bu">export</span> <span class="va">SPACK_ROOT=</span>/opt/spack</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="bu">.</span> <span class="va">$SPACK_ROOT</span><span class="ex">/share/spack/setup-env.sh</span></a></code></pre></div>
<p>Here is a snapshot:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="ex">-------------------------</span> /opt/spack/share/spack/modules/linux-centos7-x86_64 --------------------------</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">   <span class="ex">byobu-5.127-gcc-9.2.0-by2qc2g</span>          (L)    <span class="ex">python-3.7.4-gcc-9.2.0-nbjbfzi</span>     (L)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">   <span class="ex">ccache-3.3.4-gcc-9.2.0-v3xzqqh</span>         (L)    <span class="ex">r-3.5.2-gcc-9.2.0-oxo76vo</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">   <span class="ex">curl-7.63.0-gcc-9.2.0-cq4w37y</span>          (L)    <span class="ex">r-3.6.1-gcc-9.2.0-j25wr6z</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">   <span class="ex">fish-3.0.0-gcc-9.2.0-gdyab6r</span>      </a></code></pre></div>
</div>
<div id="loading-modules" class="section level2">
<h2><span class="header-section-number">2.2</span> Loading modules</h2>
<p>Modules can be loaded via <code>module load &lt;module&gt;</code>.</p>
<p>First, you need to load a C compiler as most programs depend on it.
This module is the only one that you should which uses <code>gcc-4.8.5</code>.
Make sure to also put this one into your <code>~/.bashrc</code> file!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="ex">module</span> load gcc-9.2.0-gcc-4.8.5-wqdecm4</a></code></pre></div>
<p>Now you can (for example) load GDAL:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="ex">module</span> load gdal-2.4.2-gcc-9.2.0-henhg26</a></code></pre></div>
<p>You can check that it worked via</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="ex">gdalinfo</span> --version</a></code></pre></div>
</div>
<div id="checking-loaded-modules" class="section level2">
<h2><span class="header-section-number">2.3</span> Checking loaded modules</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="ex">module</span> list</a></code></pre></div>
</div>
<div id="default-modules" class="section level2">
<h2><span class="header-section-number">2.4</span> Default modules</h2>
<p>It is useful to have some modules loaded by default when logging in to the server.
Simply add them to <code>~/.bashrc</code>.</p>
<p>When running R for spatial analysis, the following are required:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="ex">module</span> load \</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  gcc-9.2.0-gcc-4.8.5-wqdecm4 \</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  gdal-2.4.2-gcc-9.2.0-henhg26 \</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">  geos-3.7.2-gcc-9.2.0-jxq7o2n \</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">  git-2.21.0-gcc-9.2.0-o45v5mj \</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  proj-5.2.0-gcc-9.2.0-5t4r5t4 \</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">  udunits2-2.2.24-gcc-9.2.0-hupsw3n \</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">  zlib-1.2.11-gcc-9.2.0-j3zdmzq</a></code></pre></div>
<p>Furthermore, I recommend the following ones (don’t forget to append your version and compiler):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="ex">byobu-5.127-gcc-9.2.0-x5e5mnz</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="ex">git-2.21.0-gcc-9.2.0-hhkbkhg</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="ex">ccache-3.3.4-gcc-9.2.0-7klqklq</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="ex">python-3.7.4-gcc-9.2.0-nbjbfzi</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="ex">curl-7.63.0-gcc-9.2.0-cq4w37y</span></a></code></pre></div>
<p>You might wonder why you shouldn’t add a R version to this list?
The answer is that it will conflict with RStudio-Server.
Whenever opening a session, your <code>~/.bashrc</code> file is sourced.
If you specify an R version there, it will always override what is specified in the RStudio-Server settings related to R-versions.
So yes, you always need to specifically load R when logging into a new session.</p>
<p>Also make sure that <code>GDAL</code> and friends are loaded in your <code>.bashrc</code> file as otherwise RStudio Server will not find them.</p>
<p>If you need to load specific modules for a project, try to <a href="libraries.html#wrapper">create a wrapper for your project</a>.</p>
</div>
<div id="r" class="section level2">
<h2><span class="header-section-number">2.5</span> R</h2>
<p>All versions from v3.4.4 upwards are installed.</p>
<p>To load a specific R version, load the specific environment module</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># loads R v3.5.2</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="ex">module</span> load r-3.5.2-gcc-9.2.0-oxo76vo</a></code></pre></div>
<p>and then execute <code>R</code>.</p>
<p>You might find the following aliases helpful which you can put into <code>~/.bashrc</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="bu">alias</span> r344=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.4.4-hobcfrryiwu34etqvf4khv427wwkxdf5/rlib/R &amp;&amp; radian&quot;</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="bu">alias</span> r350=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.5.0-jx2cc3ecnk4zkfz3kqwomwsm5rpfouiv/rlib/R &amp;&amp; radian&quot;</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="bu">alias</span> r351=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.5.1-h4fvapuqf65avikja735xn5lzyildzzi/rlib/R &amp;&amp; radian&quot;</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="bu">alias</span> r352=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.5.2-oxo76vo5ceamc2qp6nfr6zvcqstvzksb/rlib/R &amp;&amp; radian&quot;</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="bu">alias</span> r353=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.5.3-a75bebsahiaaz6lrcdallnjprx3iybjv/rlib/R &amp;&amp; radian&quot;</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="bu">alias</span> r360=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.6.0-2sbeu7xbnocpahdm7afuonsumblmgi5j/rlib/R &amp;&amp; radian&quot;</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="bu">alias</span> r361=<span class="st">&quot;export R_HOME=/opt/spack/opt/spack/linux-centos7-x86_64/gcc-9.2.0/r-3.6.1-j25wr6zcofibs2zfjwg37357rjj26lqb/rlib/R &amp;&amp; radian&quot;</span></a></code></pre></div>
<p>This enables you to launch the specific R version using the set command, e.g. <code>r360</code> will launch R v3.6.0.</p>
<p><strong>BLAS/LAPACK</strong></p>
<p>Unfortunately we cannot use an external BLAS/LAPACK like <code>openblas</code> due to the different architectures on the nodes.
When compiling R with the use of external BLAS/LAPACK, <code>openblas</code> tailors to the arch of the main node (threadripper) and specific processes (e.g. function from the <code>mgcv</code>) package will segfault</p>
<p>The use of the R internal BLAS/LAPACK comes with a substantial decrease in speed for numerical applications.</p>
</div>
<div id="rstudio-server" class="section level2">
<h2><span class="header-section-number">2.6</span> RStudio Server</h2>
<p>RStudio Server Pro is running on port 8787 (<a href="https://edi.geogr.uni-jena.de:8787" class="uri">https://edi.geogr.uni-jena.de:8787</a>).</p>
</div>
<div id="shiny-server" class="section level2">
<h2><span class="header-section-number">2.7</span> Shiny Server</h2>
<p>Shiny server is running on port 3838 with user support.
This means users can place apps in <code>$HOME/Shinyapps/</code> and they will be deployed as <code>http://edi.geogr.uni-jena.de:3838/&lt;username&gt;/&lt;appname&gt;</code>.</p>
<p>Note the <code>http</code> (<code>https</code> is only available in the Pro version).</p>
<p>Exemplary apps:</p>
<ul>
<li><a href="http://edi.geogr.uni-jena.de:3838/patrick/hyperspectral/" class="uri">http://edi.geogr.uni-jena.de:3838/patrick/hyperspectral/</a></li>
<li><a href="http://edi.geogr.uni-jena.de:3838/jannes/cluster_map/" class="uri">http://edi.geogr.uni-jena.de:3838/jannes/cluster_map/</a></li>
</ul>
</div>
<div id="libraries-1" class="section level2">
<h2><span class="header-section-number">2.8</span> Libraries</h2>
<p>If you cannot find a module you want to use, check it Spack supports it via <code>spack list &lt;module&gt;</code> and contact an admin to install it for you.</p>
<div id="docker" class="section level3">
<h3><span class="header-section-number">2.8.1</span> Docker</h3>
<p>Docker is installed on the frontend only (for example to convert .html to .pdf).
To use <code>docker</code>, your user needs to be added to the “docker” group.
Please contact an Admin in case you want to use it.</p>
</div>
<div id="osrm" class="section level3">
<h3><span class="header-section-number">2.8.2</span> OSRM</h3>
<p><a href="https://github.com/Project-OSRM/osrm-backend">Open Source Routing Machine</a> is installed.</p>
<p>Start the server with <code>osrm-routed</code>.<br />
More information can be found <a href="https://github.com/Project-OSRM/osrm-backend/wiki/Running-OSRM">here</a>.</p>
</div>
<div id="gdal" class="section level3">
<h3><span class="header-section-number">2.8.3</span> GDAL</h3>
<p>Check <code>module avail</code> and look for GDAL to see which versions are available.</p>
</div>
</div>
<div id="getting-started" class="section level2">
<h2><span class="header-section-number">2.9</span> Getting Started</h2>
<p>If you worked through all these steps, you are almost good to go.
Here are have some further recommendations to make your life easier.</p>
<div id="byobu" class="section level4">
<h4><span class="header-section-number">2.9.0.1</span> byobu</h4>
<p><code>byobu</code> is a wrapper for your SSH session that makes it possible to close your terminal session and not loose the command running in it.
If you start long running jobs, you can safely start them in a <code>byobu</code> window without worrying about them to quit once you shut down your machine.</p>
<p>Run <code>byobu</code> after being logged in and a <code>byobu</code> session will be launched.</p>
<p>You can open multiple ones with <code>byobu -S &lt;session name&gt;</code>, e.g. <code>byobu -S session2</code>.
Once you have multiple ones open, an interactive prompt will ask you which one you want to start next time.</p>
</div>
<div id="radian" class="section level4">
<h4><span class="header-section-number">2.9.0.2</span> radian</h4>
<p><code>radian</code> is an optimized R command line tool.
You will notice the benefits compared to the default <code>R</code> once you start using it.
You need to install it via <code>pip</code> which is already installed if you installed <code>python</code>.</p>
<p>Usually <code>setuptools</code> needs to be upgraded first.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="ex">pip</span> install --user --upgrade setuptools</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="ex">pip</span> install --user radian</a></code></pre></div>
<p>Now you can either always use <code>radian</code> or set an alias in your <code>.bashrc</code> , e.g. <code>alias r=&quot;radian&quot;</code>.
Note that <code>radian</code> only works if you have set the env variable <code>R_HOME</code> correctly.
See <a href="#R">here</a> for more details.</p>
<p>If is does not work at this moment, you might need to add the binary to your <code>$PATH</code> variable in your <code>~/.bashrc</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="bu">export</span> <span class="va">PATH=</span>~/.local/bin:<span class="va">$PATH</span></a></code></pre></div>
</div>
<div id="ccache" class="section level4">
<h4><span class="header-section-number">2.9.0.3</span> ccache</h4>
<p>If you load <code>ccache</code>, you will speed-up source installations of R packages a lot.
(On Linux, all R packages are installed from source.)
Besides loading <code>ccache</code>, you also need to create the following file in your home directory (<code>~/.R/Makevars</code>):</p>
<p>(Note that you need to create the folder first, it does not exist by default (<code>mkdir ~/.R/</code>).)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="ex">CXX_STD</span> = CXX14</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="va">VER=</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="va">CCACHE=</span>ccache</a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="va">CC=$(</span><span class="ex">CCACHE</span><span class="va">)</span> <span class="fu">gcc</span> <span class="va">$(</span><span class="ex">VER</span><span class="va">)</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="va">CXX=$(</span><span class="ex">CCACHE</span><span class="va">)</span> <span class="ex">g++</span><span class="va">$(</span><span class="ex">VER</span><span class="va">)</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="va">C11=$(</span><span class="ex">CCACHE</span><span class="va">)</span> <span class="ex">g++</span><span class="va">$(</span><span class="ex">VER</span><span class="va">)</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="va">C14=$(</span><span class="ex">CCACHE</span><span class="va">)</span> <span class="ex">g++</span><span class="va">$(</span><span class="ex">VER</span><span class="va">)</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="va">FC=$(</span><span class="ex">CCACHE</span><span class="va">)</span> <span class="ex">gfortran</span><span class="va">$(</span><span class="ex">VER</span><span class="va">)</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="va">F77=$(</span><span class="ex">CCACHE</span><span class="va">)</span> <span class="ex">gfortran</span><span class="va">$(</span><span class="ex">VER</span><span class="va">)</span></a></code></pre></div>
<p>When installing a package now, you will occasionally see that the <code>gcc</code> lines are prefixed with <code>ccache</code>.
This means that this <code>gcc</code> call was already executed once and is now loaded from the cache rather than being run again.
This saves a lot of time, especially for packages that take long to install (<code>dplyr</code>, <code>Rcpp</code>, <code>stringi</code>).</p>
</div>
<div id="wrapper" class="section level4">
<h4><span class="header-section-number">2.9.0.4</span> Create a wrapper for your project</h4>
<p>Usually you might want to use a <em>packrat</em> library in a specific directory with a specific R version.
Rather than navigating there all the time by hand and loading the R version manually, you can create an alias that does this for you.
You can of course also use this approach without <em>packrat</em> - just to load a specific version.</p>
<pre><code>alias my-project=&quot;cd /path/to/project &amp;&amp; &lt;load custom env module&gt; &amp;&amp; r361&quot;</code></pre>
<p>Put this in your <code>.bashrc</code> and save time :)</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="scheduler.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://venus.geogr.uni-jena.de/giscience/hpc-user-guide/edit/master/02-libraries.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["hpc-user-guide-fus-jena.pdf", "hpc-user-guide-fus-jena.epub"]
});
});
</script>

</body>

</html>
